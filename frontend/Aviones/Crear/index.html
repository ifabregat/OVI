<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Agregar Avion</title>
</head>
<body class="bg-primary-subtle">
  <header>
    <div class="container-xxl">
      <h1 class="text-center pt-3 pb-3 rounded text-bg-primary fs-2" style="width: 100%;">Objeto Volador Identificado</h1>
    </div> 
  </header>

  <main>
    <div class="container my-4">
        <div class="row">
            <div class="col-12 col-md-10 col-lg-6 mx-auto">
                <div class="card">
                    <div class="card-body">
                        <h2 class="card-title">Agregar avion</h2>
                        <form onsubmit="crear_avion(event)">
                            <div class="mb-3">
                                <label for="name" class="form-label">Fabricante:</label>
                                <input type="text" class="form-control" id="fabricante" name="fabricante" placeholder="Boeing"
                                    required>
                            </div>

                            <div class="mb-3">
                                <label for="names" class="form-label">Modelo:</label>
                                <input type="text" class="form-control" id="modelo" name="modelo"
                                    placeholder="737-700">
                            </div>

                            <label class="mb-3 me-3">Propulsion: </label>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" value="turbohelice" type="radio" name="propulsion"
                                    id="turbohelice" required>
                                <label class="form-check-label" for="turbohelice">
                                    Turbohelice
                                </label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" value="piston" type="radio" name="propulsion"
                                    id="piston" required>
                                <label class="form-check-label" for="piston">
                                    Piston
                                </label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" value="turboreactor" type="radio" name="propulsion"
                                    id="turboreactor" required>
                                <label class="form-check-label" for="turboreactor">
                                    Turboreactor
                                </label>
                            </div>

                            <div class="mb-3">
                                <label for="publisher" class="form-label">A침o de fabricacion:</label>
                                <input type="text" class="form-control" name="aniofabricacion" id="aniofabricacion"
                                    placeholder="1970" required>
                            </div>

                            <label for="mb-1">Pais de fabricacion</label>
                            <select class="form-select mb-3" id="paisfabricacion" name="paisfabricacion" required>
                                <option value="arg">Argentina</option>
                                <option value="usa">Estados Unidos</option>
                                <option value="fra">Francia</option>
                                <option value="bra">Brasil</option>
                                <option value="uk">Reino Unido</option>
                                <option value="can">Canada</option>
                            </select>

                            <div class="mb-3">
                                <label for="image" class="form-label">Foto:</label>
                                <input type="text" class="form-control" name="foto" id="foto" required>
                            </div>

                            <button type="submit" class="btn text-bg-primary">Crear</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </main>

  <script>

    function respuesta_recibida (data) {
        if (data.mensaje === "Avi칩n agregado exitosamente") {
            alert("Avi칩n agregado exitosamente");
            window.location.reload();
        } else {
            alert("Error al agregar el avi칩n");
        }
    }

    function crear_avion (event){
        event.preventDefault();

        const formData = new FormData(event.target);

        const fabricante = formData.get("fabricante");
        const modelo = formData.get("modelo");
        const propulsion = formData.get("propulsion");
        const aniofabricacion = formData.get("aniofabricacion");
        const foto = formData.get("foto");
        const paisfabricacion = formData.get("paisfabricacion");

        fetch("http://localhost:5000/aviones", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                fabricante: fabricante,
                modelo: modelo,
                propulsion: propulsion,
                aniofabricacion: aniofabricacion,
                paisfabricacion: paisfabricacion,
                foto: foto
            })
        })
        .then((res) => res.json())
        .then(respuesta_recibida)
        .catch((error) => console.log("ERROR: ", error));
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>